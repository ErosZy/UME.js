(function(h,i){var e=h,c=i,d,f={};var j={},b=[],g={},a=[];f.define=function(){var x=this,l=arguments.length,s=0,v,m,r,t,y,q,k,o;if(l<=2){m=[];v=x._is("Function",arguments[1])?arguments[1]:function(){}}else{m=x._is("Array",arguments[1])?arguments[1]:[];v=x._is("Function",arguments[2])?arguments[2]:function(){}}o=x._parse(v);if(o){m=m.concat.apply(m,o.requires);v=o.fn}y=x._toPath(arguments[0]);for(q=0,t=m.length;q<t;q++){m[q]=x._toPath(m[q]);g[m[q]]=g[m[q]]?g[m[q]]:[];g[m[q]].push(u)}r=x._getRequireModulesInfo(m);t=r.length;for(q=0;q<t;q++){b.push(r[q])}k=x._hasLoadingModules(m);if(!t){if(k){a.push(w);return}var n=x._getModulesInstance(m),p=v.apply(x,n);j[y]=p}else{a.push(w);for(q=0;q<t;q++){x._load(r[q],function(){x._emitProxy(m);x._emitAll()})}}function u(){s++}function w(){var A,z;if(s<t){return false}A=x._getModulesInstance(m);if(A.length!=m.length){return false}x._clearProxy(m);z=v.apply(x,A);j[y]=z;return true}};f.use=function(l){var k=this;if(k._is("String",l)){l=k._toPath(l);k._load(l)}else{throw new Error("the param path is needed,please check your function caller param!")}};f._getRequireModulesInfo=function(l){var n=this,q=[],p,k;for(p=0,k=l.length;p<k;p++){var o=l[p],m=o in j||n._getLoadingIndex(o)!=-1;if(!m){q.push(o)}}return q};f._getModulesInstance=function(m){var l=this,o=[];for(var n=0,k=m.length;n<k;n++){if(m[n] in j){o.push(j[m[n]])}}return o};f._emitAll=function(){var l=this,k=false;for(var m=a.length-1;m>=0;m--){k=a[m]&&a[m].apply(l);if(k){a.splice(m,1)}}if(!b.length&&a.length){l._emitAll()}};f._emitProxy=function(n){var l=this,q;for(var o=0,k=n.length;o<k;o++){q=g[n[o]];for(var m=0,p=q.length;m<p;m++){if(q[m]){q[m].apply(l);g[n[o]][m]=null}}}};f._clearProxy=function(n){var l=this,p;for(var o=0,k=n.length;o<k;o++){p=g[n[o]];for(var m=p.length-1;m>=0;m--){if(!p[m]){p.splice(m,1)}}}};f._getLoadingIndex=function(o){var l=this,m=-1;for(var n=0,k=b.length;n<k;n++){if(b[n]==o){m=n}}return m};f._hasLoadingModules=function(n){var l=this,q;for(var o=0,k=n.length;o<k;o++){q=n[o];for(var m=0,p=b.length;m<p;m++){if(q==b[m]){return true}}}return false};f._parse=function(q){var m=this,l=q.toString(),p=/self.use\((["'])(.+?)\1\);?/g,o=[],r=[];if(!p.test(l)){return}l=m._clearNotes(l);l=l.replace(/self.use\((["'])(.+?)\1\);?/g,function(){var t=arguments[2],u=t.lastIndexOf("/"),v=t.lastIndexOf("."),s=t.slice(u+1).slice(0,v-2);s+=+new Date();o.push(t);r.push(s);return s});l=l.replace(/function\s*\((.*?)\)/,function(){r.unshift(arguments[1]);return"function()"});for(var n=0,k=r.length;n<k;n++){if(!r[n]){r.splice(n,1)}}r=r.join(",");q=new Function(r,"return ("+l+"());");return{requires:o,fn:q}};f._clearNotes=function(k){var l=this;k=k.replace(/\/\/.*|\/\*.*\*\//g,"");return k};f._on=function(o,l,m){var k=this,n=l+m.toString().replace(/\s+/g,"");o[l+"event"]=o[l]?o[l]:{};o[l+"event"][n]=m;if(document.attachEvent){o.attachEvent("on"+l,function(p){m.call(o,p)})}else{if(document.addEventListener){o.addEventListener(l,m,false)}else{o["on"+l]=o.eventName[n]}}};f._load=function(q,p){var m=this,o=document.attachEvent?true:false,k=document.getElementsByTagName("body")[0],l,n;l=document.createElement("script");l.src=q;if(o){m._on(l,"readystatechange",function(){if(l.readyState=="complete"){n=m._getLoadingIndex(q);if(n!=-1){b.splice(n,1)}if(m._is("Function",p)){p.apply(m)}}})}else{m._on(l,"load",function(){n=m._getLoadingIndex(q);if(n!=-1){b.splice(n,1)}if(m._is("Function",p)){p.apply(m)}})}k.appendChild(l)};f._toPath=function(u){var t=this,r=e.location,s=r.protocol,q=r.hostname,o=r.port?":"+r.port:"",m=r.pathname,l=r.href,n=/^(\/.+\/)/i,k,p;if(n.test(m)){k=s+"//"+q+o+RegExp["$1"]+u}else{p=l.lastIndexOf("/");k=l.slice(0,p)+u}return k};f._is=function(k,l){return Object.prototype.toString.call(l)=="[object "+k+"]"};d=document.getElementsByTagName("script")[0].getAttribute("data-main");if(d){f.use("./"+d)}e.UME=f}(window));